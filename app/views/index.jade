!!! 5
html(lang='en')
	head
		meta(charset='utf-8')
		meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
		meta(name='viewport', content='width=device-width, initial-scale=1.0')
		title Protrada V3 Proof of Concept
		!= partial('partials/styles')

	body.sidebar-hidden
		
		script 	
			if( navigator.userAgent.match(/Android/i)
		
				|| navigator.userAgent.match(/webOS/i)
		
				|| navigator.userAgent.match(/iPhone/i)
		
				|| navigator.userAgent.match(/iPad/i)
		
				|| navigator.userAgent.match(/iPod/i)
		
				|| navigator.userAgent.match(/BlackBerry/i)){	
				document.getElementsByTagName('body')[0].className += " mobile";
				}		
		
		!= partial('partials/backend-spine')
		
		!= partial('partials/alerts-aside')
				
		div(id="ajax-container")


		// footer area content
		.ajax-spinner
			.ball
				.ball1
		
		//if lt IE 9
		
		script(src='//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')
		script
			!window.jQuery && document.write("<script src=\"js/jquery-1.7.2.min.js\"><\/script>");
		script(src='//balupton.github.com/history.js/scripts/bundled/html4+html5/jquery.history.js')
		script
			!window.History && document.write("<script src=\"js/jquery.history.js\"><\/script>");
		script(src='/js/bootstrap.min.js')
		script(src='/js/jquery.tinyscrollbar.js')
		// script(src='/js/jquery.ba-resize.min.js')		
		// script(src='/js/jqplot/jquery.jqplot.js')
		// script(src='/js/jqplot/excanvas.js')
		// script(src='/js/jqplot/plugins/jqplot.highlighter.min.js')
		// script(src='/js/jqplot/plugins/jqplot.dateAxisRenderer.min.js')
		// script(src='/js/jqplot/plugins/jqplot.trendline.min.js')
		// script(src='/js/jquery.tipTip.js')
		script(src='/js/jade.js')
		script(src='/js/moo.js')
		script(src='/js/jquery.plugins.js')
		script(src='/js/pv3.js')
		script(src='/socket.io/socket.io.js')
		
		script
			function navigate(module) {
				if(module == '') {
					// restore state from server
					$.pv3.restoreState();
				}
				else {
					window.history.pushState('', module, "/" + module);
					$("#main-container").trigger("ajaxUnload");
					$.pv3.updateState('module', module);
					$.ajax('/modules/' + module + '?ajax=1', {
						'success': function (data) {
							$('#ajax-container').html(data);
							$('.selected').removeClass("selected");
							$('#spine-inner nav li a#nav-' + module).parent().addClass("selected");
							$(".ajax-spinner").hide();
						}
					});
				}
			}
