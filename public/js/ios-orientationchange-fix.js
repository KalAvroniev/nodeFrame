// Generated by CoffeeScript 1.3.3

(function(w) {
  var checkTilt, disableZoom, disabledZoom, doc, enabled, enabledZoom, initialContent, meta, orientation, restoreZoom, rotation;
  restoreZoom = function() {
    var enabled;
    meta.setAttribute("content", enabledZoom);
    document.body.innerHTML = document.body.innerHTML;
    return enabled = true;
  };
  disableZoom = function() {
    var enabled;
    meta.setAttribute("content", disabledZoom);
    return enabled = false;
  };
  checkTilt = function(e) {
    var orientation, rotation;
    orientation = Math.abs(w.orientation);
    rotation = Math.abs(e.gamma);
    if (rotation > 8 && orientation === 0) {
      if (enabled) {
        return disableZoom();
      }
    } else {
      if (!enabled) {
        return restoreZoom();
      }
    }
  };
  doc = w.document;
  if (!doc.querySelectorAll) {
    return;
  }
  meta = doc.querySelectorAll("meta[name=viewport]")[0];
  initialContent = meta && meta.getAttribute("content");
  disabledZoom = initialContent + ", maximum-scale=1.0";
  enabledZoom = initialContent + ", maximum-scale=10.0";
  enabled = true;
  orientation = w.orientation;
  rotation = 0;
  if (!meta) {
    return;
  }
  w.addEventListener("orientationchange", restoreZoom, false);
  return w.addEventListener("deviceorientation", checkTilt, false);
})(this);
