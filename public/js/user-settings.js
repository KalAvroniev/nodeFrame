// Generated by CoffeeScript 1.3.3

$(document).ready(function() {
  $("#user-settings-tabs li a").click(function(e) {
    $.app.state.update("modules.user-settings.tabs.selected", e.currentTarget.id);
  });
  $("#general-tabs li a").click(function(e) {
    var mainTab;
    mainTab = $("#user-settings-tabs li.active a")[0].id;
    $.app.state.update("modules.user-settings.tabs." + mainTab + ".tabs.selected", e.currentTarget.id);
  });
  $("header#main").find(".alerts-summary").find("span[data-title^=\"Protrada\"]").attr("data-alerts", $(".protrada .alert-count").attr("data-alerts"));
});

$(document).on("restore", function() {
  var state, tabs;
  state = $.app.state.current;
  if (state.modules["user-settings"] === undefined) {
    return;
  }
  tabs = state.modules["user-settings"].tabs;
  if (tabs === undefined) {
    return;
  }
  if (tabs.selected !== undefined) {
    $("#user-settings-tabs li a#" + tabs.selected).click();
  }
  if (tabs.selected === "general-btn") {
    if (tabs["general-btn"] === undefined || tabs["general-btn"].tabs === undefined || tabs["general-btn"].tabs.selected === undefined) {
      return;
    }
    $("#general-tabs li a#" + tabs["general-btn"].tabs.selected).click();
    return;
  }
  if (tabs.selected === "external-accounts-btn") {
    return;
  }
  if (tabs.selected === "sys-notifications-btn") {
    return;
  }
});

$(".account-selection").on("click", "li:not(.open-for-edit, .more-coming-soon)", function(e) {
  e.preventDefault();
  if ($(this).hasClass("active")) {
    $(this).removeClass("active");
  } else {
    $(this).siblings().removeClass("active").end().addClass("active");
  }
});

$.app.state.get();
